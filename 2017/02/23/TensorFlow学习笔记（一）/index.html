<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TensorFlow学习笔记（一） | Htxf-fxtH</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="按照官网的介绍、教程学习。整理、记录知识点。
这一篇是最开始的一篇。Getting Started With TensorFlow
现在的TesorFlow的API可以分为两个，一个低级一点的，称为TensorFlow Core，更适合研究人员使用，对所构建的模型有更深层的控制；另一个高级一点的，使用更简单，但还在开发中。学会了更底层的东西，更简答的用法可以很快掌握。这里只记录TensorFlow">
<meta property="og:type" content="article">
<meta property="og:title" content="TensorFlow学习笔记（一）">
<meta property="og:url" content="http://yoursite.com/2017/02/23/TensorFlow学习笔记（一）/index.html">
<meta property="og:site_name" content="Htxf-fxtH">
<meta property="og:description" content="按照官网的介绍、教程学习。整理、记录知识点。
这一篇是最开始的一篇。Getting Started With TensorFlow
现在的TesorFlow的API可以分为两个，一个低级一点的，称为TensorFlow Core，更适合研究人员使用，对所构建的模型有更深层的控制；另一个高级一点的，使用更简单，但还在开发中。学会了更底层的东西，更简答的用法可以很快掌握。这里只记录TensorFlow">
<meta property="og:updated_time" content="2017-02-24T09:14:02.650Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TensorFlow学习笔记（一）">
<meta name="twitter:description" content="按照官网的介绍、教程学习。整理、记录知识点。
这一篇是最开始的一篇。Getting Started With TensorFlow
现在的TesorFlow的API可以分为两个，一个低级一点的，称为TensorFlow Core，更适合研究人员使用，对所构建的模型有更深层的控制；另一个高级一点的，使用更简单，但还在开发中。学会了更底层的东西，更简答的用法可以很快掌握。这里只记录TensorFlow">
  
    <link rel="alternative" href="/atom.xml" title="Htxf-fxtH" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans|">
  <link href='https://fonts.googleapis.com/css?family=Dancing+Script' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Shadows+Into+Light' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/style.css">
  

  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/animate.css">
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script type="text/javascript" src="http://code.jQuery.com/jquery-latest.js"></script>
  <script src="/js/base.js"></script>
  <script src="/js/jquery.cookie.js"></script>
  <script src="/fancybox/jquery.fancybox.js"></script>
  <script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>



<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
    <div id="insert" class="home_logo"></div>
    <div class="hamburger animated shake">
      <i ></i>
      <ul>
        <li class="home"><a href="/">Home<span></span></a></li>
        <li><a href="http://cpbxx.lofter.com/" target="blank">Works<span></span></a></li>
        <li class="home_notes_showon" ><a href="/">Notes<span></span></a></li>
        <li><a href="./tucaos.html">Tucaos<span></span></a></li>
      </ul>
    </div>
</header>

      <div class="outer">
        <section id="main"><div class="main_center"><article id="post-TensorFlow学习笔记（一）" class="article article-type-post" itemscope itemprop="blogPost">

  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      TensorFlow学习笔记（一）
    </h1>
  


        <div class="article-meta">
          <span class="article-date">
  <time datetime="2017-02-23T11:30:06.000Z" itemprop="datePublished">Feb 23 2017</time>
</span>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>按照<a href="https://www.tensorflow.org/" target="_blank" rel="external">官网</a>的介绍、教程学习。整理、记录知识点。</p>
<p>这一篇是最开始的一篇。<a href="https://www.tensorflow.org/get_started/get_started" target="_blank" rel="external">Getting Started With TensorFlow</a></p>
<p>现在的TesorFlow的API可以分为两个，一个低级一点的，称为TensorFlow Core，更适合研究人员使用，对所构建的模型有更深层的控制；另一个高级一点的，使用更简单，但还在开发中。学会了更底层的东西，更简答的用法可以很快掌握。这里只记录TensorFlow Core中的知识点。</p>
<p>这篇文章其实可以分为两部分。一部分介绍TensorFlow中的一些名词、类、方法等等。另一部分介绍了一个简单的机器学习模型——线性回归。</p>
<h3 id="1-一些概念"><a href="#1-一些概念" class="headerlink" title="1. 一些概念"></a>1. 一些概念</h3><ul>
<li><p><strong>Tensor</strong></p>
<ul>
<li>tensor可以说是一种<strong>数据结构</strong>，TensorFlow中所有的数据都是用这种数据结构表示的</li>
<li>可以将一个tensor看成是一个n-维的数组或列表</li>
<li>一个tensor的维度可以是静态的也可以是动态的</li>
<li>只有tensor可以在计算图中传递（流动flow）</li>
<li><p>tensor的<strong>rank 秩</strong>？？？</p>
</li>
<li><p>tensro的<strong>shape 形状</strong>？？？</p>
</li>
</ul>
</li>
<li><p><strong>Computational Graph</strong></p>
<p>为什么要有计算图呢？谷歌在<a href="https://www.tensorflow.org/get_started/mnist/beginners" target="_blank" rel="external">下一篇</a>的介绍中有讲。<br>在Python中进行高效的数值运算，是用的NumPy，将耗时的计算（比如矩阵乘法）移到Python外，用更底层的语言，更高效地完成，之后再将结果倒回Python中。但这样倒过来倒过去的，也有很多开销。所以使用TensorFlow时，将所有的操作都先描述出来，然后将整个操作过程都移到外边进行，不用进行一次运算操作，来回倒一次，这样开销就会少很多。（很多其他的机器学习库都是类似这样的。）</p>
<p>图是由什么组成的呢？点(<strong>Node</strong>)和边。所以一些数据（<strong>常量constant</strong>、<strong>变量Variables</strong>）和操作(<strong>Operations</strong>)都放在node中。边呢就表示tensor的流动了。</p>
</li>
<li><p><strong>Session</strong></p>
<p>有了上边计算图的概念，这个Session就好理解了。因为计算图中的东西（节点）只是一种描述，并没有真正的运算。所以需要一个东西去告诉tensorflow去运行图中的操作，就是这个Session了。</p>
<p>两三个点可以组成一个子图，七八个点也可以组成一个子图。所以可以看到一个Session实例可以run好多次，这次run这两个点，下次run其他几个点，这都是可以的。</p>
<p>还有一个问题。当用session去run多个节点时要注意写法。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line">node1 = ...</div><div class="line">node2 = ...</div><div class="line">sess = tf.Session()</div><div class="line">// 错误！！！</div><div class="line">sess.run(node1, node2)</div><div class="line">// 正确</div><div class="line">sess.run([node1, node2])</div></pre></td></tr></table></figure>
<p><a href="">这里</a>是run()方法的api，可以接收好几个参数。但第一个参数是说想要执行的tensor和operation（即图中的节点）。可以是一个，或者是任意嵌套的列表、字典等。</p>
</li>
<li><p><strong>constant</strong></p>
<p>常量。没什么特别的。注意是小写。</p>
</li>
<li><p><strong>placeholder</strong></p>
<ul>
<li><p>看名字，这是一个空儿（茅坑），等会儿会有各种数据（shi||niao）填进来。</p>
</li>
<li><p>之后run的时候要用到它时，用<strong>dict字典</strong>来给它传数据。{xx:XXX,yy:YYY}</p>
</li>
<li><p>和变量的区别？当然也能给变量各种值。placeholder更简单？也不是。概念上更符合？</p>
</li>
</ul>
</li>
<li><p><strong>Variable</strong></p>
<p>变量。注意首字母大写。</p>
<p>需要专门的初始化。（常量不需要。）</p>
</li>
</ul>
<h3 id="2-线性模型"><a href="#2-线性模型" class="headerlink" title="2. 线性模型"></a>2. 线性模型</h3><p>机器学习，简单一点的，有这么一种情况。我们是从很多的数据中去学习（挖掘）一些知识。这些数据其实是满足一种分布的。我们要想学习到一些知识，最根本又最有用的方法就是根据这些数据推断出数据的分布情况。这样需要什么样的知识都可以从这个分布推断出来。</p>
<p>线性模型就是假设数据是线性分布的。我们的目的就是找出一条直线去拟合（regression回归问题）这些数据。即求出这条直线的斜率（W）和偏差（b）。用变量来定义这两个参数。因为是要不停的试、不停的变的。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line">// 注意W被示例写为大写，而b是小写。因为W经常是个矩阵，b只是标量。</div><div class="line">// 上边常量是小写，变量首字母大写。这个原因是什么？</div><div class="line">W = tf.Variable([<span class="number">.3</span>], tf.float32)</div><div class="line">b = tf.Variable([<span class="number">-.3</span>], tf.float32)</div></pre></td></tr></table></figure></p>
<p>现在我们已有的东西是什么？一些数据。即一些x和其相应的y。用placeholder定义。等会儿run的时候再传具体的数。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x = tf.placeholder(tf.float32)</div><div class="line">y = tf.placeholder(tf.float32)</div></pre></td></tr></table></figure></p>
<p>我们的模型的是线性模型，根据x即W和b可以得到一些预测值。即<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">linear_model = W * x + b</div></pre></td></tr></table></figure></p>
<p>现在我们根据x和W、b得到一些预测值，但这些值和真正的值有多少差距？即我们的模型和真实的数据分布有什么差距（当前的W、b和真的W、b的差距）？用<strong>loss</strong>或<strong>cost</strong>来表示这个损失。这里用预测值和实际值的差值的平方和来表示。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">loss = tf.reduce_sum(tf.square(linear_model - y))</div></pre></td></tr></table></figure></p>
<p>若有差距，我们怎样减少这些差距？因为我们的<strong>终极目标</strong>就是<strong>使损失函数最小</strong>（其实就是一个优化问题）。TensorFlow提供了各种各样的<strong>优化器optimizers</strong>，这里使用的是最简单的<strong>梯度下降算法gradient descent</strong>。这也正是TensorFlow这些机器学习库厉害之处？想想自己code实现梯度下降算法……<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.01</span>)</div><div class="line">train = optimizer.minimize(loss)</div></pre></td></tr></table></figure></p>
<p>接下来就是进行训练了。根据这些数据x，沿着这个优化器optimizer的方向，不断的调整模型参数W和b。这些过程就在上边的train中自动完成了。这也是TensorFlow这些机器学习库厉害之处？</p>
<p>在run上边的train时，我们要给placeholder，x和y传入具体的训练数据。还有要将变量Variable，W和b进行初始化。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// 训练数据</div><div class="line">x_train = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line">y_train = [<span class="number">0</span>, <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-3</span>]</div><div class="line">// 准备初始化变量</div><div class="line">init = tf.global_variables_initializer()</div><div class="line">// 创建Session</div><div class="line">sess = tf.Session()</div><div class="line">// 真正初始化变量</div><div class="line">sess.run(init)</div><div class="line">// 训练过程</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>):</div><div class="line">    sess.run(train, &#123;x: x_train, y: y_train&#125;)</div></pre></td></tr></table></figure></p>
<p>这样就完成了一个简单的机器学习。当然之后还有验证学习到的模型的准确性、测试学习到的模型的泛化能力等等任务。</p>

      
    </div>
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tensorflow学习/">tensorflow学习</a></li></ul>


    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/02/22/JS高程（四）/" id="article-nav-older" class="article-nav-link-wrap">ALI</a>
  
</nav>


  
</article>


</div>
</section>
      </div>
    </div>
  </div>
</body>
</html>
